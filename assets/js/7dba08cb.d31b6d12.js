"use strict";(self.webpackChunkit_3038c=self.webpackChunkit_3038c||[]).push([[616],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,o=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),c=s(n),d=l,h=c["".concat(i,".").concat(d)]||c[d]||m[d]||o;return n?a.createElement(h,r(r({ref:t},u),{},{components:n})):a.createElement(h,r({ref:t},u))}));function d(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=n.length,r=new Array(o);r[0]=c;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:l,r[1]=p;for(var s=2;s<o;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3937:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>p,toc:()=>s});var a=n(7462),l=(n(7294),n(3905));const o={title:"Module 12 \u2013 Websites in Python using Flask",sidebar_position:12,slug:"/12"},r=void 0,p={unversionedId:"module-12",id:"module-12",title:"Module 12 \u2013 Websites in Python using Flask",description:"In this lab, we'll create a simple web application using Python Flask.",source:"@site/content/modules/module-12.md",sourceDirName:".",slug:"/12",permalink:"/modules/12",draft:!1,tags:[],version:"current",sidebarPosition:12,frontMatter:{title:"Module 12 \u2013 Websites in Python using Flask",sidebar_position:12,slug:"/12"},sidebar:"defaultSidebar",previous:{title:"Module 11 \u2013 Hosting and Deploying",permalink:"/modules/11"},next:{title:"AWK Command",permalink:"/modules/WIP/awk"}},i={},s=[{value:"Lab 11",id:"lab-11",level:2}],u={toc:s};function m(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"In this lab, we'll create a simple web application using Python Flask."),(0,l.kt)("p",null,"Flask allows you to use Python to create web apps similar to the way NodeJS does."),(0,l.kt)("p",null,"Create ",(0,l.kt)("inlineCode",{parentName:"p"},"web.py")," file"),(0,l.kt)("p",null,"Add the following code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from routes import app\n\nif __name__ == \"__main__\":\n    app.run(port=5000, host='0.0.0.0')\n")),(0,l.kt)("p",null,"Create ",(0,l.kt)("inlineCode",{parentName:"p"},"routes.py")," file"),(0,l.kt)("p",null,"Add the following code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from flask import Flask\n\napp = Flask(__name__)\napp.config.from_object(__name__)\n\n@app.route('/')\ndef hello():\n    return 'Hello, World!'\n")),(0,l.kt)("p",null,"Let's create our Flask venv."),(0,l.kt)("p",null,"Here is a shortcut:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# Windows:\npy -3 -m venv venv\nvenv\\Scripts\\activate.ps1\n\n# Unix:\npython3 -m venv venv\n. venv/bin/activate\n")),(0,l.kt)("p",null,"Once your VENV is activated, Install flask"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"pip install flask\n")),(0,l.kt)("p",null,"Now, run your flask app"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"python web.py\n")),(0,l.kt)("p",null,"Open a web browser and browse to ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:5000"},"http://localhost:5000")),(0,l.kt)("p",null,"You should see a \"Hello, World\" page. That's it! You've just created a Flask app. Of course, that's only the beginning. Let's see what other options we have."),(0,l.kt)("p",null,"Let's create another route called ",(0,l.kt)("inlineCode",{parentName:"p"},"/welcome")),(0,l.kt)("p",null,"There are a few things we're going to add to this. First, let's add a template. To add a template, create a new folder called ",(0,l.kt)("inlineCode",{parentName:"p"},"templates"),"."),(0,l.kt)("p",null,"Within this folder, create a file called ",(0,l.kt)("inlineCode",{parentName:"p"},"layout.html")),(0,l.kt)("p",null,"Add the following code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},"<!DOCTYPE html>\n  <head>\n  </head>\n  <body>\n    <H1>Flask app!</H1>\n    <br />\n    {% block content %}\n    {% endblock %}\n  </body>\n</html>\n")),(0,l.kt)("p",null,"Let's create Another file in our templates folder called ",(0,l.kt)("inlineCode",{parentName:"p"},"welcome.html")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'{% extends "layout.html" %}\n{% block content %}\n<p><em>This is the Welcome page!</em></p>\n{% endblock %}\n')),(0,l.kt)("p",null,"Save all of these files."),(0,l.kt)("p",null,"Return to your ",(0,l.kt)("inlineCode",{parentName:"p"},"routes.py")," file and add the following code:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"@app.route('/welcome')\n\ndef welcome():\n   return render_template(\"welcome.html\")\n")),(0,l.kt)("p",null,"Run the app and go to the welcome page ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:5000/welcome"},"http://localhost:5000/welcome")),(0,l.kt)("p",null,"OOPS! We got an error. Let's turn on debugging and try to solve this issue."),(0,l.kt)("p",null,"Open ",(0,l.kt)("inlineCode",{parentName:"p"},"web.py")),(0,l.kt)("p",null,"Add the following argument to app.run"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"    app.run(debug=True, port=5000, host='0.0.0.0')\n")),(0,l.kt)("p",null,"Rerun the application and open the welcome page again."),(0,l.kt)("p",null,"Now we have some more information about our error. We could google it, but I now the solution."),(0,l.kt)("p",null,"Return to routes.py and add the following to the first line in your script"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from flask import Flask, render_template\n")),(0,l.kt)("p",null,"Save the file."),(0,l.kt)("p",null,"Ahh, notice your command line. Since we are using the ",(0,l.kt)("inlineCode",{parentName:"p"},"Debug=True")," flag, our program will automatically restart whenever we make changes. This is very convenient."),(0,l.kt)("p",null,"Open ",(0,l.kt)("a",{parentName:"p",href:"http://localhost:5000/welcome"},"http://localhost:5000/welcome")),(0,l.kt)("p",null,"There are a few takeaways here, which I'll highlight by making some additional changes to our file."),(0,l.kt)("p",null,"Within ",(0,l.kt)("inlineCode",{parentName:"p"},"@app.route('/')"),", change the it to the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"@app.route('/')\ndef hello():\n   name = 'Wes'\n   return render_template(\"index.html\", value=name)\n")),(0,l.kt)("p",null,"Please note the added variable ",(0,l.kt)("inlineCode",{parentName:"p"},"name")," with a value. Also notice that we've added the ",(0,l.kt)("inlineCode",{parentName:"p"},"render_template")," function, passing the name of our template and a value of the variable. Let's see what we can do with this."),(0,l.kt)("p",null,"From the templates folder, create a file called ",(0,l.kt)("inlineCode",{parentName:"p"},"index.html")),(0,l.kt)("p",null,"Add the following content:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'{% extends "layout.html" %}\n{% block content %}\n<p><em>Hello, {{ value }}. Welcome to my app!</em></p>\n{% endblock %}\n')),(0,l.kt)("p",null,"Save this file and browse to ",(0,l.kt)("inlineCode",{parentName:"p"},"http://localhost:5000")),(0,l.kt)("p",null,"A few things to notice: first, our header is the same, since it inherits from the layout.html template, same as our welcome.html page. Second, our variable is displayed on the page. This opens a few doors of possibility for us. Let's expand on this a bit more. I want the user to input the name themselves, and then display it. There are a few ways to do this."),(0,l.kt)("p",null,"Let's first create a form. Open ",(0,l.kt)("inlineCode",{parentName:"p"},"index.html")," and change it to the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'{% extends "layout.html" %}\n{% block content %}\n<p><em>What is your name?</em>\n  <form action="/welcome" method="POST"><input name="myName"><input type="submit" value="Submit"></form>\n</p>\n{% endblock %}\n')),(0,l.kt)("p",null,"Notice our form action points to ",(0,l.kt)("inlineCode",{parentName:"p"},"/welcome"),". This means we're going to have to make changes to the ",(0,l.kt)("inlineCode",{parentName:"p"},"/welcome")," route AND the ",(0,l.kt)("inlineCode",{parentName:"p"},"welcome.html")," template. Let's change the route first."),(0,l.kt)("p",null,'First, comment out our name variable from our "/" route, we don\'t need it anymore.\nOpen ',(0,l.kt)("inlineCode",{parentName:"p"},"routes.py")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"@app.route('/')\n\ndef hello():\n  # myName = 'Wes'\n  return render_template(\"index.html\")\n  #, name=myName)\n")),(0,l.kt)("p",null,"Next, edit the ",(0,l.kt)("inlineCode",{parentName:"p"},"welcome")," route."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"@app.route('/welcome', methods=['POST'])\n\ndef welcome():\n  return render_template(\"welcome.html\", myName=request.form['myName'])\n")),(0,l.kt)("p",null,"Next, edit the first line to include the import of the request module:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"from flask import Flask, render_template, request\n")),(0,l.kt)("p",null,"Finally, edit the welcome.html template:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-html"},'{% extends "layout.html" %}\n\n{% block content %}\n<p><em>Hello, {{ myName }}!</em></p>\n{% endblock %}\n')),(0,l.kt)("p",null,"Save all files and refresh."),(0,l.kt)("p",null,"Congrats! You just created your first flask app. Feel free to add on to this, add some CSS styles, make it pretty, etc."),(0,l.kt)("p",null,"Check out ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/miguelgrinberg/microblog/tree/v0.1"},"https://github.com/miguelgrinberg/microblog/tree/v0.1")," which is the official flask tutorial. This application is called flaskr, a microblog built in flask.\nFollow the README on instructions on how to run this."),(0,l.kt)("p",null,"Once it's running, take a look at the application. Create an account, login and create a post. Delete or edit the post. Continue until you feel comfortable with the application. Take a look at the code. Locate the routes for each type of request, like add, edit, update, and delete."),(0,l.kt)("h2",{id:"lab-11"},"Lab 11"),(0,l.kt)("p",null,"Submit the link to your github folder containing the flask app you created above. It should run and prompt me to input my name, and work when I submit it."))}m.isMDXComponent=!0}}]);