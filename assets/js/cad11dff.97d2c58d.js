"use strict";(self.webpackChunkit_3038c=self.webpackChunkit_3038c||[]).push([[925],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=a.createContext({}),d=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=d(n),h=o,m=c["".concat(i,".").concat(h)]||c[h]||u[h]||r;return n?a.createElement(m,l(l({ref:t},p),{},{components:n})):a.createElement(m,l({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=c;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:o,l[1]=s;for(var d=2;d<r;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2505:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var a=n(7462),o=(n(7294),n(3905));const r={title:"Week 6 \u2013 Node JS",sidebar_position:6},l=void 0,s={unversionedId:"week-6",id:"week-6",title:"Week 6 \u2013 Node JS",description:"List of Links for this week:",source:"@site/content/modules/week-6.md",sourceDirName:".",slug:"/week-6",permalink:"/IT3038C/modules/week-6",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{title:"Week 6 \u2013 Node JS",sidebar_position:6},sidebar:"defaultSidebar",previous:{title:"Week 5 \u2013 Python",permalink:"/IT3038C/modules/week-5"},next:{title:"Week 7 - Modules, Plugins, Debugging",permalink:"/IT3038C/modules/week-7"}},i={},d=[{value:"Installing Node on Windows",id:"installing-node-on-windows",level:2},{value:"Install Node on Linux",id:"install-node-on-linux",level:2},{value:"Node JS Basics",id:"node-js-basics",level:2},{value:"Get User Input",id:"get-user-input",level:3},{value:"Web servers",id:"web-servers",level:3},{value:"Lab 6",id:"lab-6",level:2}],p={toc:d};function u(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"List of Links for this week:\nLynda - ",(0,o.kt)("a",{parentName:"p",href:"https://www.lynda.com/Node-js-tutorials/Node-js-Essential-Training/417077-2.html"},"https://www.lynda.com/Node-js-tutorials/Node-js-Essential-Training/417077-2.html")),(0,o.kt)("h2",{id:"installing-node-on-windows"},"Installing Node on Windows"),(0,o.kt)("p",null,"Download the installer from ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/"},"https://nodejs.org/en/download/")),(0,o.kt)("p",null,"Select LTS 64bit. (LTS is Long Term Support and is an even release)"),(0,o.kt)("p",null,"Verify the installation"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node --version\n")),(0,o.kt)("p",null,"Verify npm is working"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm --version\n")),(0,o.kt)("h2",{id:"install-node-on-linux"},"Install Node on Linux"),(0,o.kt)("p",null,"To install Node on Linux, we'll use a provided RPM install. According to ",(0,o.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/package-manager/#enterprise-linux-and-fedora"},"https://nodejs.org/en/download/package-manager/#enterprise-linux-and-fedora"),", just run the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"curl --silent --location https://rpm.nodesource.com/setup_16.x | sudo bash -\nsudo yum -y install nodejs\n")),(0,o.kt)("p",null,"Again, verify"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node --version\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm --version\n")),(0,o.kt)("h2",{id:"node-js-basics"},"Node JS Basics"),(0,o.kt)("p",null,"By now we're getting a feel for how scripting languages work. Node is a script language that takes advantage of Javascript, making it a more 'familiar' language for traditional web developers.\nWhile Node is a web language, it is also capable of many server-side operations as well. We'll take a look at both sides this week."),(0,o.kt)("p",null,"Create a Node folder in your IT3038C-scripts directory and create a new file called test.js.\nAdd the following code"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'console.log("Hello, World")\n')),(0,o.kt)("p",null,"Save it and run it using"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'$ node test.js\n\n"Hello, World"\n')),(0,o.kt)("p",null,"Simple... now, let's put this string in a variable."),(0,o.kt)("p",null,"Variables can be declared using the keywords ",(0,o.kt)("inlineCode",{parentName:"p"},"var"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"let"),", or ",(0,o.kt)("inlineCode",{parentName:"p"},"const"),". ",(0,o.kt)("inlineCode",{parentName:"p"},"var")," is the most common, but ",(0,o.kt)("inlineCode",{parentName:"p"},"let")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"const")," are more modern. A ",(0,o.kt)("inlineCode",{parentName:"p"},"let")," variable can be reassigned while a ",(0,o.kt)("inlineCode",{parentName:"p"},"const")," variable cannot."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const hello = "Hello from Node JS Variable!"\nconsole.log(hello)\n')),(0,o.kt)("p",null,"And run it"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node test\n")),(0,o.kt)("p",null,"And just like other languages, we have a few options for using variables, particularly with string manipulation.\nWe can use a TEMPLATE STRING, similar to Python and Bash."),(0,o.kt)("p",null,'This code uses the "back tick" character'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"console.log (`Printing variable hello: ${hello}`);\n")),(0,o.kt)("p",null,"This will print the string with the variable included."),(0,o.kt)("p",null,'Node also includes several global variables, denoted with a double underscore "__"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'console.log("directory name: " + __dirname);\nconsole.log("directory and file name: " + __filename);\n')),(0,o.kt)("p",null,'Node includes several delivered modules, similar to Python. Modules can be added using npm. More on that later. For now, let\'s add the "Path" module.'),(0,o.kt)("p",null,"At the top of the script, add"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const path = require("path");\n')),(0,o.kt)("p",null,"A quick aside about the ';' semicolon usage. Semicolons are implied with Javascript, so you don't HAVE to have it, but it is a best practice."),(0,o.kt)("p",null,'The require method tells our code to import this module. Now we can use "path" functions in our code. Add this line to the bottom of our script.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'console.log("Using PATH module:");\nconsole.log(`Hello from file ${path.basename(__filename)}`);\n')),(0,o.kt)("p",null,"If you command out the path module using //  you will see that the script will throw an error:\nReferenceError: path is not defined"),(0,o.kt)("p",null,'Now, similar to Python, we can pass arguments to our scripts and handle it in our code.\nTo do this, we can pull the "process.argv" variable. Add this line to the bottom of our script.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"console.log(`Process args: ${process.argv}`)\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node test\n")),(0,o.kt)("p",null,'Notice the output is an "array" with 2 value. The first value is our Node executable, and the second is our full path to our file.\nIf I add an argument after the script by running it with some additional parameters, we\'ll see those parameters added to this array.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"node test var1\n")),(0,o.kt)("p",null,"Create a new file called ",(0,o.kt)("inlineCode",{parentName:"p"},"getIPByHostname.js")),(0,o.kt)("p",null,"First, we need to make sure we have at least 1 argument in our script. There are several ways to do this, but this method is the most straight-forward."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'if (process.argv.length <= 2) {\n  console.log("USAGE: " + __filename + " hostname.com")\n  process.exit(-1)\n}\n\nconst hostname = process.argv[2]\n\nconsole.log(`Checking IP of: ${hostname}`)\n')),(0,o.kt)("p",null,"Now, let's find the equivalent of NodeJS to find the IP of our hostname. To do this, we're going to require to import the DNS module.\nAt the top of the file, add"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const dns = require('dns');\n")),(0,o.kt)("p",null,"Now, we can write some javascript to get what we want."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const dns = require(\'dns\');\n\nconst hostnameLookup = (hostname) => {\n  dns.lookup(hostname, (err, addresses, family) => {\n    console.log(addresses);\n  });\n}\n\nif (process.argv.length <= 2) {\n  console.log("USAGE: " + __filename + " IPADDR")\n  process.exit(-1)\n}\n\nconst hostname = process.argv[2]\nconsole.log(`Checking IP of: ${hostname}`)\n\nhostnameLookup(hostname);\n')),(0,o.kt)("p",null,"Don't worry if this code doesn't make a lot of sense. That will come with experience.\nThe point here is that we have all of the same abilities in Node that we have in most other programming languages, though it may require a few additional lines of code."),(0,o.kt)("h3",{id:"get-user-input"},"Get User Input"),(0,o.kt)("p",null,"We can also get input from the user while the script is running. This uses the stdin function.\nCreate a new file called getUserInput.js"),(0,o.kt)("p",null,"This file is going to ask a series of questions and generate some responses, similar to what we did last week in Python.\nLet's start by asking the user for their name:"),(0,o.kt)("p",null,"First, we ask with the 'process.stdout.write' command or console.log. console.log is just process.stdout.write with a line-break at the end, so either one is fine."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'process.stdout.write("Hello. What is your name? ")\n\nprocess.stdin.on(\'data\', (data) => {\n  console.log("Hello " + data.toString())\n});\n')),(0,o.kt)("p",null,"Now, javascript runs asynchronously and javascript loves things called callback functions. This means, we'll have to create a function that runs whenever an event is fired. In this case, our event is called 'process.stdin.on' and we can pass our information, the \"data\" variable, to our 'callback function' that will handle the rest.\nRun the script."),(0,o.kt)("p",null,"Now it's taking our input, but it's not ending. We can end it by adding ",(0,o.kt)("inlineCode",{parentName:"p"},"process.exit()"),"."),(0,o.kt)("p",null,"We can also call a function on exit of the application, like so"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"process.stdout.write(\"Hello. What is your name? \")\n\nprocess.stdin.on('data', (data) => {\n  console.log(\"Hello \" + data.toString())\n  process.exit()\n});\n\nprocess.on('exit', () => {\n  console.log('Thanks for the info!')\n});\n")),(0,o.kt)("h3",{id:"web-servers"},"Web servers"),(0,o.kt)("p",null,"Let's get to the bread and butter of Node, and that is the web server.\nTo do this, we will need the HTTP module.\nCreate a new file called server.js"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const http = require("http");\n\nconst server = http.createServer((req, res) => {\n  res.writeHead(200, {"Content-Type": "text/text"});\n\n  res.end(`Hello from Node!`)\n})\n\nserver.listen(3000)\n\nconsole.log("Server listening on port 3000")\n')),(0,o.kt)("p",null,"This is a simple example of a web server. There are a few ways to hit this web server.\nYou can use curl from linux, or you can use a browser on your Windows machine."),(0,o.kt)("p",null,"Just open a web browser and type in ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:3000/"},"http://localhost:3000/"),"."),(0,o.kt)("p",null,"Linux NOTE: You can call a website from command line using curl:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl localhost:3000\n")),(0,o.kt)("p",null,"You can also hit it from your Windows machine if you disable the linux firewall and call the IP address of your linux machine in a web browser:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"sudo systemctl stop firewalld.service\n")),(0,o.kt)("p",null,"Remember our use of the backtick earlier? We can apply that here and add full html to our response, with variables included"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const http = require("http");\n\nconst server = http.createServer((req, res) => {\n  res.writeHead(200, {"Content-Type": "text/html"});\n\n  res.end(`\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>Node JS Response</title>\n      </head>\n      <body>\n        <h1>Hello!</h1>\n        <p>${req.url}</p>\n        <p>${req.method}</p>\n      </body>\n    </html>\n  `)\n})\n\nserver.listen(3000)\n\nconsole.log("Server listening on port 3000")\n')),(0,o.kt)("p",null,"This makes it easy to include information in our responses. We can modify this a bit to make it a little more usable, by changing the res.end to use a body variable and setting the body variable to our content. We can also chain our ",(0,o.kt)("inlineCode",{parentName:"p"},"listen(3000)")," function to the end of our web server."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const http = require("http");\n\nconst server = http.createServer((req, res) => {\n  res.writeHead(200, {"Content-Type": "text/html"});\n\n  res.end(`\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>Node JS Response</title>\n      </head>\n      <body>\n        <h1>Hello!</h1>\n        <p>${req.url}</p>\n        <p>${req.method}</p>\n      </body>\n    </html>\n  `)\n\n}).listen(3000)\n\nconsole.log("Server listening on port 3000")\n')),(0,o.kt)("p",null,"This gets us the same results with a little less code."),(0,o.kt)("p",null,"Right now, regardless of the request, our NODE site serves the same page with a dynamic variable. If you go to a sub-page of our site, you'll get see our content change on the page, but this isn't very practical. Let's use a module for reading from the file system to get straight HTML content. Create a new folder called Public within your Node folder. Create a file called index.html within the Public folder."),(0,o.kt)("p",null,"Put the following HTML code in Index.html:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},"<!DOCTYPE html>\n<html>\n  <head>\n    <title>Node JS Response</title>\n  </head>\n  <body>\n    <h1>Hello! Welcome to my site!</h1>\n  </body>\n</html>\n")),(0,o.kt)("p",null,"Return to server.js."),(0,o.kt)("p",null,"Let's add an additional path to our server. To do this, we need to account for every request coming into our web server.\nThe default request of / will serve our static HTML message."),(0,o.kt)("p",null,"Any other request should return a 404 error, using the req.url variable we defined earlier to give the user a clearer message."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const http = require("http");\n\nhttp.createServer((req, res) => {\n  if (req.url === "/") {\n    fs.readFile("./public/index.html", "UTF-8", (err, body) => {\n      res.writeHead(200, {"Content-Type": "text/html"});\n      res.end(body);\n    });\n  } else {\n    res.writeHead(404, {"Content-Type": "text/plain"});\n    res.end(`404 File Not Found at ${req.url}`);\n  }\n}).listen(3000);\n\nconsole.log("Server listening on port 3000");\n')),(0,o.kt)("p",null,"Now, we'll add another path on to our web server that can include anything we want. How about we add a /sysinfo path and serve some system information to it.\nI want sysinfo to return information about the OS, so I'm going to include the ",(0,o.kt)("inlineCode",{parentName:"p"},'require("OS")')," module. I'm also going to add the IP module to get our IP address."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const http = require("http");\nconst fs = require("fs");\nconst os = require("os");\nconst ip = require(\'ip\');\n\nhttp.createServer((req, res) => {\n  if (req.url === "/") {\n      fs.readFile("./public/index.html", "UTF-8", (err, body) => {\n      res.writeHead(200, {"Content-Type": "text/html"});\n      res.end(body);\n    });\n  } else if(req.url.match("/sysinfo")) {\n    myHostName=os.hostname();\n    html=`\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>Node JS Response</title>\n      </head>\n      <body>\n        <p>Hostname: ${myHostName}</p>\n        <p>IP: ${ip.address()}</p>\n        <p>Server Uptime: </p>\n        <p>Total Memory: </p>\n        <p>Free Memory: </p>\n        <p>Number of CPUs: </p>\n      </body>\n    </html>`\n    res.writeHead(200, {"Content-Type": "text/html"});\n    res.end(html);\n  } else {\n    res.writeHead(404, {"Content-Type": "text/plain"});\n    res.end(`404 File Not Found at ${req.url}`);\n  }\n}).listen(3000);\n\nconsole.log("Server listening on port 3000");\n')),(0,o.kt)("p",null,"OOPS, something is missing when I run it.\nWell, for starters, IP is not a delivered module. So we need to install it. To do this, type"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install ip\n")),(0,o.kt)("p",null,"You'll notice this creates a folder called node_modules within your project where any npm dependencies are stored. It also creates a package.json and package-lock.son file in that folder to list the installed dependencies. You'll want to make sure to commit the package and package-lock while adding the node_modules folder to your gitignore file."),(0,o.kt)("p",null,"Now run it again.\nWe'll get into modules more in the coming weeks.\nLet's do one more thing to our index.html page. Add a hyperlink to the /sysinfo page"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},"<!DOCTYPE html>\n<html>\n  <head>\n    <title>Node JS Response</title>\n  </head>\n  <body>\n    <h1>Hello! Welcome to my site!</h1>\n    <p><a href='/sysinfo'>Get Info About This System</a></p>\n  </body>\n</html>\n")),(0,o.kt)("p",null,"For our assignment, we'll be filling in the blanks on our sysinfo page above."),(0,o.kt)("h2",{id:"lab-6"},"Lab 6"),(0,o.kt)("p",null,"Create a Node web server and display the following data:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"In addition to the hostname and IP as shown above, add in the server uptime in Days, Hours, Minutes, Seconds (as in the sample below), Total Memory in MB, Free Memory in MB, and Number of CPUs."),(0,o.kt)("li",{parentName:"ul"},"Use ",(0,o.kt)("a",{parentName:"li",href:"https://nodejs.org/api/os.html"},"https://nodejs.org/api/os.html")," for more info."),(0,o.kt)("li",{parentName:"ul"},"Some ",(0,o.kt)("em",{parentName:"li"},"HINTS"),":",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"CPU is an array. That has to count for something"),(0,o.kt)("li",{parentName:"ul"},"Memory is returned in bytes. How many bytes are in a Megabyte?"),(0,o.kt)("li",{parentName:"ul"},"Server time is returned in seconds. How many seconds are in a day? Subtract as many days as you can. Now subtract at many hours as you can. Now subtract as many minutes as you can... Etc\u2026"),(0,o.kt)("li",{parentName:"ul"},"Google is your friend. If you're stuck, you can typically find how to get these outputs via Google.")))),(0,o.kt)("p",null,"Here is a sample page:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Screenshot of sample HTML page",src:n(3232).Z,width:"401",height:"239"})))}u.isMDXComponent=!0},3232:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/1-server-example-page-8d2b8a73c22332b4b6326c62722efa02.png"}}]);